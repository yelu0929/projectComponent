---
name: 如何创建一个组件
route: /HowToCreateComponent
order: -800
sidebar: true
---

# 如何创建一个组件？

## 一点思考
### 问题：组件是什么？

把输入数据经过 **指定的流程** 转换成输出数据的代码对象

#### 组件的三要素为
+ 输入
+ 处理流程
+ 输出

其中，**处理流程** 是组件最核心的工作。 除了三要素外，为了丰富组件的适用场景，我们还需要给组件增加一些附加接口。

组件需求应当可以总结成一句话： 对于*** 数据，经过 *** 流程，输出 ***

### 问题：提取组件的目的是什么？ 为什么不（希望）每次写一遍？
+ 让更多的人，在更多的场景下使用，不再重复劳动
+ 对于一个业务场景，建立标准化的流程


### 组件开发步骤
要实现一个组件，可概括为以下几步：

1. 分析组件需求
    1. 描述组件的功能
    1. 数据的输入、输出
    1. 数据在组件内部的运行流程
    1. 如果是显示组件，还需要分析人机交互流程
1. 定义组件参数
    1. 输入参数：数据类型，选填，必填
		1. 输出参数：公有方法，公有属性，事件
1. 编码
    1. 创建类
    1. 类注释
    1. 定义接口
    1. 接口注释
    1. 功能实现
1. 扩展组件接口，具体过程同重复1，2，3
1. 组件编写完成后，有条件的话，还应编写自动化的测试用例。
	


## 以单选按钮组为例

1. 需求分析
    1. 组件功能：对于“列表”数据，经过“渲染、用户点击、只保留最后点击项”的流程，输出“选中的值”。
    1. 输入：一组数据
    1. 数据流程：渲染数据，点击选择，并保留最一次选中的项
    1. 输出：通过onChange输出选中的项
	
1. 参数定义
    1. 输入参数：数据源，onChange事件对应的函数
    1. 输出参数：在onChange事件中输出选中项
1. 编码
    1. 创建项目：yarn create react-app my-app --typescript
    1. 创建功能文件，样式文件
    1. 定义类，接口
    1. 注释
    1. 编写功能
1. 扩展接口
    1. 需要分析
        1. 支持对象类型
        1. 自定义value、label属性名称
        1. 自定义渲染方法
    1. 重复上面1，2，3


## 通过以上示例，可以进行一个总结

1. 组件自身要做的事集中在“流程的处理”，因此一个组件的流程应尽量少。流程尽量少，组件结构才能稳定，否则任意一个需求改变，就需要修改组件。
	
2. 参数应尽量灵活，参数越灵活，适用的场景越广，组件修改的概率就越低，而更少的修改，也能带来更高的稳定性。灵活性包含两方面：
    1. 组件接口多--兼顾使用便捷和功能丰富
    1. 对某参数，可选值多--在更多同流程的场景下都可使用，例如刚才示例的dataSource支持各种类型的数据


所以，为了让组件尽量稳定，健壮，组件设计应：
1. 参数尽量灵活--参数灵活则组件的适用场景多，越不易频繁修改

2. 流程尽量稳定--流程越稳定则组件复杂度低，与其它模块关联越少

**俗称：高内聚低耦合**	
